# SLAM System Configuration
slam:
  # Camera parameters
  camera_model: "pinhole"
  focal_length: 527.0
  principal_point: [326.0, 247.0]
  distortion_coefficients: [0.0, 0.0, 0.0, 0.0, 0.0]
  
  # Feature tracking parameters
  use_dynamic_segmentation: true
  min_num_keyframes: 3
  max_keyframes: 20
  
  # Depth bounds
  min_depth: 0.1
  max_depth: 10.0
  
  # Keyframe selection criteria
  keyframe_distance: 0.5  # meters
  keyframe_angle: 0.4  # radians
  
  # SLAM tracking parameters
  tracking_max_iter: 30
  tracking_window_size: 30
  
  # SLAM mapping parameters
  mapping_update_interval: 5  # frames
  
  # Gaussian Splatting parameters
  num_gaussians: 100000
  gaussian_decay_rate: 0.975
  gaussian_sparsity: 0.01
  gaussian_density_threshold: 0.5
  
  # Visualization parameters
  render_fps: 30
  visualization_interval: 1  # seconds
  
  # Performance tuning
  batch_size: 1024
  num_processing_threads: 4
  
  # Dynamic scene handling
  dynamic_confidence_threshold: 0.7
  dynamic_filtering_interval: 2  # seconds
  
  # Integration mode
  integration_mode: "concurrent"  # "sequential" or "concurrent"
  parallel_processing: true
  
  # Error handling
  max_reprojection_error: 0.1
  min_inlier_ratio: 0.3
  
  # System parameters
  checkpoint_frequency: 100  # frames
  save_frequency: 50  # images

# GPU Configuration
gpu:
  cuda_device: 0
  use_mixed_precision: true
  batch_size: 1024
  use_tensor_cores: true
  memory_pool_size: 128
  
  # Performance optimizations
  async_processing: true
  caching_enabled: true
  
  # Monitoring
  print_memory_usage: true
  cuda_stream_size: 8192

# System Configuration
system:
  # Working directories
  working_directory: "/tmp/4dgs_slam_ros2"
  checkpoint_directory: "/tmp/4dgs_slam_ros2/checkpoints"
  results_directory: "/tmp/4dgs_slam_ros2/results"
  keyframes_directory: "/tmp/4dgs_slam_ros2/keyframes"
  
  # Logging
  log_level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  log_to_file: true
  log_format: "console"  # "console" or "file"
  
  # GUI
  enable_gui: false
  gui_backend: "pyqt"  # "pyqt" or "tkinter"
  
  # Save/Load functionality
  save_results: true
  save_format: "ply"  # "ply", "obj", or "exr"
  save_compression: "lz4"  # "lz4", "bz2", "none"
  
  # Checkpointing
  load_from_checkpoint: ""
  checkpoint_interval: 100  # frames
  auto_restart: false
  resume_from_latest: true
  
  # Thread configuration
  max_threads: 8
  min_threads: 2
  
  # Error tolerance
  max_startup_time: 300.0  # seconds
  timeout_connection: 5.0  # seconds
  max_retries: 3
  
  # Backup configuration
  enable_backups: true
  backup_directory: "/tmp/4dgs_slam_ros2/backups"

# Data Configuration
data:
  # Input source
  source_type: "rosbag"  # "rosbag", "ros", "file", or "image_sequence"
  input_source: ""
  
  # ROS2 specific settings
  use_rosbag: true
  bag_file: "/path/to/your/bagfile.bag"
  image_topic: "/camera/image_raw"
  depth_topic: "/camera/depth"
  camera_info_topic: "/camera/camera_info"
  
  # Sensor data settings
  use_sync_frames: true
  sync_buffer_size: 10
  max_delay_ms: 30
  
  # Preprocessing
  denoise_enabled: true
  denoise_strength: 0.1
  resize_enabled: false
  resize_width: 0
  resize_height: 0
  
  # Frame sampling
  frame_skip: 1  # process every Nth frame
  min_frame_interval: 0.033  # 30 FPS
  
  # Validation
  validate_data: true
  max_missing_frames: 5
  required_keys: ["image", "depth"]
  
  # Output configuration
  output_format: "ros"  # "ros", "csv", "txt", or "custom"

# Monitoring and Visualization
monitoring:
  # Publishing settings
  publish_odometry: true
  publish_poses: true
  publish_trajectory: true
  publish_keyframes: true
  publish_statistics: true
  publish_statistics_interval: 1.0  # seconds
  
  # Topic configuration
  odometry_topic: "/slam/odometry"
  pose_topic: "/slam/pose"
  trajectory_topic: "/slam/trajectory"
  keyframes_topic: "/slam/keyframes"
  statistics_topic: "/slam/statistics"
  images_topic: "/slam/images"
  depth_topic: "/slam/depth"
  
  # Visualization settings
  publish_visualization: true
  visualize_keyframes: true
  visualize_trajectory: true
  visualize_depth: true
  visualize_registration: false
  
  # Performance metrics
  enable_profiling: true
  performance_log_frequency: 1.0  # seconds
  
  # Debug output
  enable_debug: false
  log_level: "INFO"
  
  # Real-time monitoring
  real_time_monitor: true
  monitor_interval: 1.0  # seconds
  
  # Statistics collection
  collect_statistics: true
  statistics_window_size: 100
  export_statistics: false
  statistics_filename: "/tmp/4dgs_slam_ros2/statistics.csv"

# Performance Optimization
optimization:
  # Processing configuration
  parallel_processing: true
  
  # Caching
  enable_caching: true
  cache_size_mb: 512
  
  # GPU configuration
  gpu_stream_size: 8192
  batch_processing: true
  async_load: true
  
  # Memory management
  memory_limit_mb: 4096
  auto_cleanup: true
  cleanup_interval: 300  # seconds
  
  # Frame processing optimization
  early_exit: false
  min_keyframes_trigger: 3
  
  # Camera pose smoothing
  pose_smoothing_enabled: true
  pose_filtering_window: 5
  
  # Gaussian parameter tuning
  adaptive_gaussian_count: true
  gaussian_adaptation_rate: 0.01  

# User Interface
user_interface:
  # Terminal output
  verbose_mode: false
  progress_bar: true
  
  # Configuration options
  load_default_config: true
  load_custom_config: true
  
  # Interactive mode
  interactive_mode: false
  
  # Error handling
  stop_on_error: false
  continue_on_warning: true
  
  # System information
  show_system_info: true
  show_parameters: true

# Advanced Configuration
advanced:
  # Custom algorithms
  custom_segmentation: ""
  custom_detection: ""
  custom_tracking: ""
  
  # Integration flags
  enable_4d_gaussian_splatting: true
  enable_dynamic_segmentation: true
  enable_geometric_aware: true
  
  # Feature extraction parameters
  feature_detector: "ORB"  # "ORB", "SIFT", "SURF", or "custom"
  descriptor_extractor: "ORB"  # "ORB", "SIFT", "SURF", or "custom"
  
  # Optimization settings
  optimizer_type: "g2o"  # "g2o", "ceres", or "custom"
  optimizer_iterations: 50
  
  # Dynamic scene handling
  dynamic_detection_method: "optical_flow"  # "optical_flow", "segmentation", or "custom"
  
  # Visualization
  visual_style: "standard"  # "standard", "debug", or "minimal"
  
  # Performance overrides
  force_single_thread: false
  disable_cuda: false
  
  # Recovery mechanisms
  enable_recovery: true
  recovery_mode: "automatic"  # "automatic", "manual", or "disabled"
  
  # Backup and restore
  backup_enabled: true
  snapshot_frequency: 1000  # frames

# Safety and Reliability
safety:
  # Runtime constraints
  max_reconstruction_time: 10.0  # seconds
  max_processing_delay: 0.1  # seconds
  
  # Error handling
  error_recovery_threshold: 5  # consecutive errors
  
  # Resource constraints
  max_memory_usage: 80  # percent
  
  # Data integrity
  validate_output: true
  checksum_enabled: true
  
  # System health
  health_check_frequency: 5.0  # seconds
  max_health_check_time: 1.0  # seconds
  
  # Graceful shutdown
  graceful_shutdown: true
  save_before_shutdown: true
  cleanup_temp_files: true
  
  # Logging and debugging
  log_exceptions: true
  log_warnings: true
  
  # Version control
  save_version_info: true
  save_git_commit: false

# ROS2 Specific Configuration
ros2:
  # Node configuration
  node_name: "4dgs_slam"
  node_namespace: ""
  node_verbosity: "INFO"
  
  # Time configuration
  use_sim_time: false
  sim_time_step: 0.1
  
  # Service configuration
  enable_services: true
  
  # Action server configuration
  enable_actions: true
  
  # Parameter server
  enable_parameters: true
  
  # Connection configuration
  max_retries: 3
  retry_delay: 1.0
  
  # Topic configuration
  default_qos_profiles:
    default: "default"
    sensor: "sensor"
    cmd_vel: "sensor"
    default_max_keepalive: 20

# Logging and Output
logging:
  # Log level
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
  
  # Log format
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  date_format: "%Y-%m-%d %H:%M:%S"
  
  # Log destinations
  console: true
  file: true
  syslog: false
  
  # File logging configuration
  log_directory: "/tmp/4dgs_slam_ros2/logs"
  log_file_prefix: "slam"
  log_file_max_size_mb: 100
  log_file_backup_count: 5
  
  # Log rotation
  enable_rotation: true
  rotation_type: "size"  # "size" or "time"
  rotation_interval: 1  # days or hours
  
  # Performance logging
  log_performance: true
  performance_log_interval: 1.0
  
  # Debug logging
  debug_output: false
  debug_level: "LOW"  # "LOW", "MEDIUM", "HIGH"
  
  # Output verbosity
  verbose: false
  quiet: false